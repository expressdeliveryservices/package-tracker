<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Track Your Shipment</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f0f2f5; }
input, button { padding:10px; margin:5px 0; }
button { cursor:pointer; background:#1e90ff; color:white; border:none; }
button:hover { background:#1565c0; }
#result { margin-top:20px; background:white; padding:15px; border-radius:5px; box-shadow:0 0 5px rgba(0,0,0,0.2); }
.timeline { border-left:2px solid #1e90ff; margin-left:10px; padding-left:10px; }
.timeline div { margin-bottom:10px; }
img.stamp { max-width:120px; margin-top:10px; border:1px solid #ccc; border-radius:3px; }
</style>
</head>
<body>

<h2>Track Your Shipment</h2>
<input type="text" id="trackingNumber" placeholder="Enter Tracking Number">
<button onclick="trackPackage()">Track</button>

<div id="result"></div>

<script>
async function trackPackage() {
    const tn = document.getElementById('trackingNumber').value.trim();
    if(!tn) return alert("Enter a tracking number");

    try {
        // Replace this URL with your actual shipments.json location in your repo
        const response = await fetch('https://yourusername.github.io/package-tracker/shipments.json');
        if(!response.ok) throw new Error("Failed to fetch shipments");

        const data = await response.json();
        const shipment = data.find(s => s.tracking_number.toUpperCase() === tn.toUpperCase());
        const resultDiv = document.getElementById('result');

        if(!shipment) {
            resultDiv.innerHTML = "<p>Tracking number not found.</p>";
            return;
        }

        // Display shipment details
        let html = `
            <h3>Shipment Details</h3>
            <p><strong>Tracking Number:</strong> ${shipment.tracking_number}</p>
            <p><strong>Sender:</strong> ${shipment.sender}</p>
            <p><strong>Receiver:</strong> ${shipment.receiver}</p>
            <p><strong>Origin:</strong> ${shipment.origin}</p>
            <p><strong>Destination:</strong> ${shipment.destination}</p>
            <p><strong>Status:</strong> ${shipment.status}</p>
            <p><strong>Estimated Delivery:</strong> ${shipment.expected_delivery}</p>
            <p><strong>Shipment Type:</strong> ${shipment.shipment_type || 'N/A'}</p>
            <p><strong>Transport Mode:</strong> ${shipment.transport_mode || 'N/A'}</p>
            <p><strong>Quantity:</strong> ${shipment.quantity || 'N/A'}</p>
            <p><strong>Payment Mode:</strong> ${shipment.payment_mode || 'N/A'}</p>
            <p><strong>Amount:</strong> $${shipment.amount || 0}</p>
            <p><strong>Notes:</strong> ${shipment.extended_description || ''}</p>
        `;

        // Display stamp if available
        if(shipment.stamp){
            html += `<p><strong>Official Stamp:</strong><br><img class="stamp" src="${shipment.stamp}" alt="Stamp"></p>`;
        }

        // Display timeline if available
        if(shipment.timeline && shipment.timeline.length){
            html += `<h4>Timeline</h4><div class="timeline">`;
            shipment.timeline.forEach(event => {
                html += `<div>
                    <strong>${event.time}</strong> - ${event.description} (${event.status})
                </div>`;
            });
            html += `</div>`;
        }

        resultDiv.innerHTML = html;

    } catch(err) {
        console.error(err);
        document.getElementById('result').innerHTML = "<p>Error fetching shipment data. Try again later.</p>";
    }
}
</script>

</body>
</html>
