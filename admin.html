<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Express Delivery</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 0; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; }
    h1 { text-align: center; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
    button { margin-top: 15px; padding: 10px 15px; background: #28a745; color: #fff; border: none; cursor: pointer; border-radius: 5px; }
    button:hover { background: #218838; }
    .output { margin-top: 20px; background: #f0f0f0; padding: 15px; border-radius: 6px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Admin - Generate Tracking Code</h1>

    <label for="newSender">Sender:</label>
    <input type="text" id="newSender" placeholder="Sender Name">

    <label for="newReceiver">Receiver:</label>
    <input type="text" id="newReceiver" placeholder="Receiver Name">

    <label for="newAddress">Receiver Address:</label>
    <input type="text" id="newAddress" placeholder="Receiver Address">

    <label for="newAmount">Amount ($):</label>
    <input type="number" id="newAmount" placeholder="Shipment Amount">

    <label for="newOrderId">Order ID:</label>
    <input type="text" id="newOrderId" placeholder="Order ID">

    <label for="newEstDeliveryDate">Est. Delivery Date:</label>
    <input type="date" id="newEstDeliveryDate">

    <!-- âœ… Fixed Fields -->
    <label for="newPaymentMode">Payment Mode:</label>
    <select id="newPaymentMode">
      <option value="">Select payment mode</option>
      <option value="Cash">Cash</option>
      <option value="Card">Card</option>
      <option value="Bank Transfer">Bank Transfer</option>
    </select>

    <label for="newModeOfTransport">Mode of Transport:</label>
    <select id="newModeOfTransport">
      <option value="">Select mode</option>
      <option value="Air">Air</option>
      <option value="Sea">Sea</option>
      <option value="Land">Land</option>
    </select>

    <label for="newTypeOfShipment">Type of Shipment:</label>
    <input type="text" id="newTypeOfShipment" placeholder="e.g. Documents, Electronics">

    <label for="newQuantity">Quantity:</label>
    <input type="number" id="newQuantity" placeholder="Enter quantity">

    <label for="newOfficialStampDate">Official Stamp Date:</label>
    <input type="date" id="newOfficialStampDate">

    <label for="newLat">Latitude:</label>
    <input type="text" id="newLat" placeholder="Receiver Latitude">

    <label for="newLng">Longitude:</label>
    <input type="text" id="newLng" placeholder="Receiver Longitude">

    <label for="newTimeline">Timeline (JSON format):</label>
    <textarea id="newTimeline" rows="5" placeholder='[{"time":"01 Oct 2025 12:00","description":"Shipment Created","status":"PENDING","completed":false}]'></textarea>

    <label for="newContent">Content:</label>
    <textarea id="newContent" rows="3" placeholder="Shipment Content"></textarea>

    <button onclick="generateShipment()">Generate Tracking Code</button>

    <div class="output" id="output"></div>
  </div>

  <script>
    function generateShipment() {
      const trackingNumber = "TRK" + Math.floor(Math.random() * 1000000);

      const shipment = {
        trackingNumber: trackingNumber,
        sender: { name: document.getElementById("newSender").value },
        receiver: {
          name: document.getElementById("newReceiver").value,
          address: document.getElementById("newAddress").value,
          lat: document.getElementById("newLat").value,
          lng: document.getElementById("newLng").value
        },
        receipt: {
          amount: document.getElementById("newAmount").value,
          orderId: document.getElementById("newOrderId").value,
          estDeliveryDate: document.getElementById("newEstDeliveryDate").value,
          paymentMode: document.getElementById("newPaymentMode").value,
          modeOfTransport: document.getElementById("newModeOfTransport").value,
          typeOfShipment: document.getElementById("newTypeOfShipment").value,
          quantity: document.getElementById("newQuantity").value,
          officialStampDate: document.getElementById("newOfficialStampDate").value
        },
        timeline: [],
        content: document.getElementById("newContent").value
      };

      try {
        shipment.timeline = JSON.parse(document.getElementById("newTimeline").value);
      } catch (e) {
        alert("Invalid JSON format in Timeline field");
        return;
      }

      document.getElementById("output").textContent = 
        "Generated Shipment JSON:\n\n" + JSON.stringify(shipment, null, 2);

      console.log("Generated shipment:", shipment);
    }
  </script>
</body>
</html>
