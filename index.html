<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Express Delivery Service — Track Package</title>
<style>
:root{--brand:#1e90ff;--accent:#00c853;--muted:#ccc;}
*{box-sizing:border-box}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f7f8fb;color:#111;scroll-behavior:smooth}
a{color:var(--brand);text-decoration:none}
.container{max-width:1200px;margin:0 auto;padding:18px}

/* NAV */
.navbar{display:flex;justify-content:space-between;align-items:center;padding:12px 18px;background:#fff;border-bottom:1px solid #e6e6e6;position:sticky;top:0;z-index:999}
.logo{font-weight:700;color:var(--brand)}
.nav-links{display:flex;gap:12px;align-items:center}
.nav-links a{padding:6px 8px;border-radius:4px;color:#222}
.hamburger{display:none;cursor:pointer}
.hamburger div{width:24px;height:3px;background:var(--brand);margin:4px 0;border-radius:2px}

/* header video */
header{position:relative;height:320px;overflow:hidden;border-bottom:1px solid #eee}
header video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;pointer-events:none;opacity:0.6}
.header-overlay{position:relative;z-index:2;padding:46px 18px;color:white;text-shadow:0 2px 8px rgba(0,0,0,0.45)}
.header-overlay h1{font-size:2rem;margin:0}
.header-overlay p{max-width:900px;margin-top:8px}

/* sections */
section{padding:20px 0;border-bottom:1px solid #f0f0f0}
.section-title{font-size:1.25rem;margin-bottom:10px;color:var(--brand)}

/* image wall */
.image-wall{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
.image-wall img,.image-wall video{width:100%;height:auto;border-radius:6px;border:1px solid #eee;display:block}
.image-wall .desc{margin-top:8px;font-size:0.93rem;color:#444;line-height:1.45}

/* tracking controls */
.tracking-controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
input[type="text"], input[type="email"]{padding:10px;border:1px solid #ddd;border-radius:6px;min-width:220px}
button{background:var(--brand);color:#fff;border:none;padding:10px 14px;border-radius:6px;cursor:pointer}
button.ghost{background:#f1f1f1;color:#222}

/* shipment boxes */
.shipment-tracking,.shipment-content{max-width:900px;margin:12px 0;padding:18px;border:1px solid #ddd;background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
.shipment-tracking .header,.shipment-content .header{font-weight:700;margin-bottom:10px}

/* timeline */
.timeline{position:relative;margin:14px 0;padding-left:72px}
.timeline:before{content:"";position:absolute;left:36px;top:0;bottom:0;width:6px;background:#eee;border-radius:3px}
.timeline-event{position:relative;margin-bottom:28px;opacity:0;transform:translateX(-18px);animation:slideIn .6s forwards}
.timeline-event:nth-child(1){animation-delay:.45s}
.timeline-event:nth-child(2){animation-delay:1.0s}
.tick{position:absolute;left:8px;top:0;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;border:5px solid var(--muted);box-shadow:0 8px 22px rgba(0,0,0,0.06);font-weight:700;font-size:18px}
.timeline-event.completed .tick{background:var(--accent);border-color:rgba(0,0,0,0.06);box-shadow:0 10px 26px rgba(0,160,72,0.15);color:#fff;transform:scale(1.02);animation:tickPop .5s ease}
.timeline-event.intransit .tick{background:var(--brand);color:#fff;box-shadow:0 10px 30px rgba(30,144,255,0.18);animation:glowPulse 1.2s infinite}
.event-content{display:block;margin-left:0;line-height:1.3}
.status-box{display:inline-block;background:#ddd;color:#000;padding:7px 12px;border-radius:10px;margin-top:8px;font-size:0.9rem;font-weight:700}
.time-date{display:block;color:var(--brand);font-weight:700;margin-top:8px;font-size:0.95rem}

/* animations */
@keyframes tickPop{0%{transform:scale(.6)}60%{transform:scale(1.25)}100%{transform:scale(1)}}
@keyframes glowPulse{0%{transform:scale(1);box-shadow:0 6px 18px rgba(30,144,255,0.12)}50%{transform:scale(1.08);box-shadow:0 12px 34px rgba(30,144,255,0.22)}100%{transform:scale(1);box-shadow:0 6px 18px rgba(30,144,255,0.12)}}
@keyframes slideIn{to{opacity:1;transform:translateX(0)}}

/* map */
.map-container{width:100%;height:360px;border-radius:8px;overflow:hidden;border:1px solid #eee;position:relative;margin-top:12px}
.map-overlay{position:absolute;z-index:5;left:50%;transform:translateX(-50%);top:12px;background:rgba(255,255,255,0.95);padding:8px 14px;border-radius:8px;font-weight:800;color:#111;border:1px solid #eee}

/* animated truck */
.truck-wrap{width:140px;height:72px;overflow:visible;margin:8px 0}
.truck svg{width:140px;height:72px}
.truck .move{animation:truckMove 3s linear infinite}
@keyframes truckMove{0%{transform:translateX(-6px)}50%{transform:translateX(6px)}100%{transform:translateX(-6px)}}

/* reviews */
#reviewsBoard{margin-top:12px;padding:12px;border:1px solid var(--brand);border-radius:8px;background:#fff;min-height:60px;display:flex;align-items:center;justify-content:center;position:relative}
.review{opacity:0;position:absolute;transition:opacity 1s ease-in-out;width:100%;text-align:center}
.review.show{opacity:1;position:relative}

/* newsletter/support/popup */
.newsletter{display:flex;gap:10px;margin-top:12px}
.newsletter input{flex:1;padding:10px;border-radius:6px;border:1px solid #ddd}
.newsletter button{padding:10px 14px;border-radius:6px}

/* footer */
footer{background:#fff;padding:20px;margin-top:20px;text-align:center;color:var(--brand);border-top:1px solid #eee}

/* responsive */
@media(max-width:820px){
  .header-overlay{padding:22px}
  .timeline{padding-left:90px}
  .truck-wrap{width:120px;height:60px}
  .truck svg{width:120px;height:60px}
  .nav-links{display:none}
  .hamburger{display:block}
  .nav-links.mobile-active{display:flex;flex-direction:column;position:absolute;right:10px;top:56px;background:#fff;padding:8px;border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
}
</style>
</head>
<body>

<!-- NAV -->
<div class="navbar">
  <div class="logo">Express Delivery</div>
  <div class="nav-links" id="navLinks">
    <a href="#home">Home</a>
    <a href="#track">Track Packages</a>
    <a href="#contact">Contact</a>
    <!-- Admin login link (points to backend login). Protect on server. -->
    <a href="/tracker/admin/login.php" id="adminLink" style="color:#c0392b">Admin Login</a>
  </div>
  <div class="hamburger" onclick="toggleMobileMenu()" title="Menu">
    <div></div><div></div><div></div>
  </div>
</div>

<!-- HEADER -->
<header>
  <video autoplay loop muted playsinline>
    <source src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/From%20KlickPin%20CF%20Pin%20van%20Nayara%20Duartt%20op%20Slow%20in%202025.mov" type="video/mp4">
  </video>
  <div class="header-overlay container">
    <h1>EXPRESS DELIVERY SERVICES LOGISTIC FIRM</h1>
    <p>Track shipments, generate tracking codes (admin only), update receiver airports, and download invoices — all in one place.</p>
  </div>
</header>

<div class="container">

  <!-- DELIVERY WALL -->
  <section id="home">
    <h2 class="section-title">Delivery Wall</h2>
    <div class="image-wall">
      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1676.jpeg" alt="Delivery 1">
        <p class="desc">Our team ensures every package reaches its destination safely and on time. Every shipment is professionally packaged and tracked using modern logistics systems. We prioritize security and punctuality, ensuring customers receive timely updates and accurate delivery information for a worry-free shipping experience.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1677.webp" alt="Delivery 2">
        <p class="desc">Fast and secure delivery across multiple regions. We use experienced couriers and robust tracking to provide transparency throughout the shipping lifecycle. Our solutions are designed to be efficient, making sure your parcels arrive in perfect condition with clear communication at every stage.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1678.jpeg" alt="Delivery 3">
        <p class="desc">Real-time tracking gives you visibility from pickup to delivery. Our team manages each step to prevent delays and ensure safe handling. Clients benefit from instant status updates, so they always know where their package is and when to expect delivery.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1680.jpeg" alt="Delivery 4">
        <p class="desc">Tailored logistics for unique needs. We accommodate special handling, urgent shipments, and high-value items with careful attention. Combining technology and trained staff, we provide a reliable service that adapts to your business requirements and personal deliveries alike.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1681.jpeg" alt="Delivery 5">
        <p class="desc">Timely deliveries are our commitment. With strict quality controls and proactive problem solving, our logistics network ensures packages travel securely and arrive on schedule. Customers receive fast responses and comprehensive tracking, so deliveries are stress-free and dependable.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1682.jpeg" alt="Delivery 6">
        <p class="desc">Dedicated professionals handle every shipment with care. Using modern equipment and transportation, we minimize transit times while maximizing package safety. Our tracking tools and customer support provide peace of mind and accurate delivery windows for every order.</p>
      </div>

      <div>
        <img src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1683.jpeg" alt="Delivery 7">
        <p class="desc">State-of-the-art tracking and secure handling combine to protect your parcels. Our team ensures transparency and accountability, offering updates and confirmations so customers can plan with confidence and receive their shipments exactly as expected.</p>
      </div>

      <div>
        <video autoplay loop muted playsinline>
          <source src="https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/From%20KlickPin%20CF%20White%20Truck%20Parked%20Next%20to%20Bridge.mov" type="video/mp4">
        </video>
        <p class="desc">Observe our logistics process in action. This video shows packages loaded and prepared for transit, reflecting the careful handling and efficient workflows our team uses to deliver every shipment reliably and professionally.</p>
      </div>
    </div>
  </section>

  <!-- REVIEWS -->
  <section>
    <h2 class="section-title">Customer Reviews</h2>
    <div id="reviewsBoard">
      <div class="review" id="review0">⭐ Alice Johnson — Excellent service! Fast and reliable.</div>
      <div class="review" id="review1">⭐⭐ Michael Smith — Package arrived ahead of time.</div>
      <div class="review" id="review2">⭐⭐⭐ Samantha Lee — Helpful and responsive support.</div>
      <div class="review" id="review3">⭐⭐⭐⭐ John Doe — Amazing service, highly recommend!</div>
      <div class="review" id="review4">⭐⭐⭐⭐⭐ Emily Davis — Professional and efficient delivery every time.</div>
    </div>
  </section>

  <!-- BUSINESS HOURS -->
  <section>
    <h2 class="section-title">Business Hours</h2>
    <div class="business-hours">
      <span>Friday: <span style="color:#00ff00;font-weight:bold;animation:blink 1s infinite">Open 24 hours</span></span><br>
      <span>Saturday: <span style="color:#00ff00;font-weight:bold;animation:blink 1s infinite">Open 24 hours</span></span><br>
      <span>Sunday: <span style="color:#00ff00;font-weight:bold;animation:blink 1s infinite">Open 24 hours</span></span>
    </div>
  </section>

  <!-- TRACK -->
  <section id="track">
    <h2 class="section-title">Track Your Package</h2>

    <div class="tracking-controls" style="margin-bottom:12px;">
      <input id="trackingNumber" type="text" placeholder="Enter Tracking ID (e.g. EDABC123...)">
      <button id="trackBtn" onclick="visitorTrack()">Track Now</button>
      <button class="ghost" onclick="clearTracking()">Clear</button>
    </div>

    <div id="shipmentTracking" class="shipment-tracking" style="display:none;"></div>
    <div id="shipmentContent" class="shipment-content" style="display:none;"></div>

    <div class="map-container">
      <div class="map-overlay">CURRENT LOCATION ON MAP</div>
      <iframe id="mapFrame" width="100%" height="100%" style="border:0" src="https://www.google.com/maps?q=195299%20St.%20Petersburg,%20Prosveshcheniya%20Avenue%20104,%20Apt.%20281&output=embed"></iframe>
    </div>

    <div style="margin-top:12px;display:flex;align-items:center;gap:12px;">
      <div class="truck-wrap">
        <div class="truck">
          <svg viewBox="0 0 140 72" xmlns="http://www.w3.org/2000/svg" class="move" style="overflow:visible">
            <g transform="translate(0,0)">
              <rect x="8" y="20" width="80" height="30" rx="3" fill="#1e90ff"/>
              <rect x="92" y="30" width="40" height="22" rx="3" fill="#0a74d1"/>
              <!-- cartons -->
              <rect x="18" y="24" width="14" height="12" fill="#f4a261"/>
              <rect x="36" y="24" width="14" height="12" fill="#e76f51"/>
              <rect x="54" y="24" width="14" height="12" fill="#f4a261"/>
              <!-- wheels -->
              <circle cx="36" cy="54" r="6" fill="#222"/>
              <circle cx="104" cy="54" r="6" fill="#222"/>
            </g>
          </svg>
        </div>
      </div>
      <div style="font-size:0.95rem;color:#444">In-vehicle animation: cartons loaded and moving — visual transit indicator.</div>
    </div>

  </section>

  <!-- CONTACT -->
  <section id="contact">
    <h2 class="section-title">Contact Us</h2>
    <p>Phone: +1 (941) 207-8626</p>
    <p>Email: <a href="mailto:Expressdeliveryservice0016@gmail.com">Expressdeliveryservice0016@gmail.com</a></p>

    <div class="newsletter" style="margin-top:12px;">
      <input id="newsletterEmail" type="email" placeholder="Enter your email to subscribe">
      <button onclick="subscribeNewsletter()">Subscribe</button>
      <button style="margin-left:8px" onclick="openSupport()">Support</button>
    </div>

    <div style="margin-top:12px;">
      <h4>Headquarter</h4>
      <iframe src="https://www.google.com/maps?q=47-00+Northern+Blvd,+Long+Island+City,+NY+11101,+USA&output=embed" width="100%" height="250" style="border:0;border-radius:5px;"></iframe>
    </div>
  </section>

</div><!-- container -->

<!-- Support Popup -->
<div id="supportPopup" style="display:none;position:fixed;right:18px;bottom:18px;background:#fff;border:1px solid #ddd;padding:12px;border-radius:8px;z-index:9999;width:340px;box-shadow:0 6px 18px rgba(0,0,0,0.08)">
  <h3>Support</h3>
  <input id="sp_name" placeholder="Your name" style="width:100%;padding:8px;margin-bottom:8px;border:1px solid #ddd;border-radius:4px"/><br/>
  <input id="sp_email" placeholder="Your email" style="width:100%;padding:8px;margin-bottom:8px;border:1px solid #ddd;border-radius:4px"/><br/>
  <textarea id="sp_message" placeholder="Message" rows="4" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px"></textarea><br/>
  <div style="display:flex;gap:8px;margin-top:8px;">
    <button onclick="sendSupport()">Send</button>
    <button class="ghost" onclick="closeSupport()">Close</button>
  </div>
</div>

<!-- Footer -->
<footer>
  <div style="max-width:1100px;margin:0 auto;">
    <p>©2025 Express Delivery Service. All Rights Reserved.</p>
    <p>Fast Logistics Company | Reliable Shipping Solutions Worldwide</p>
    <div style="margin-top:8px;"><a href="#home">Home</a> | <a href="#track">Track Packages</a> | <a href="#contact">Contact</a></div>
  </div>
</footer>

<script>
/* ---------------------------
   Configuration - change API_BASE to your backend
   --------------------------- */
const API_BASE = 'https://api.yourdomain.com/tracker/api/'; // <-- REPLACE with your backend domain
const INVOICE_IMAGE_URL = 'https://raw.githubusercontent.com/expressdeliveryservices/package-tracker/refs/heads/main/IMG_1790.jpeg';

/* helpers */
function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]); }
function toggleMobileMenu(){ const nav=document.getElementById('navLinks'); nav.classList.toggle('mobile-active'); }

/* newsletter */
function subscribeNewsletter(){ const e=document.getElementById('newsletterEmail').value; if(e) alert('Thanks — updates will be sent to '+e); else alert('Enter an email'); }

/* support popup */
function openSupport(){ document.getElementById('supportPopup').style.display='block'; }
function closeSupport(){ document.getElementById('supportPopup').style.display='none'; }
function sendSupport(){ const em=document.getElementById('sp_email').value || ''; alert('Support request received. We will contact ' + em); closeSupport(); }

/* clear tracking */
function clearTracking(){ document.getElementById('trackingNumber').value=''; document.getElementById('shipmentTracking').style.display='none'; document.getElementById('shipmentContent').style.display='none'; }

/* visitor tracking flow:
   - when user clicks Track Now:
     - show "Tracking..." immediately
     - call API (non-blocking). If API returns success, use its data. If not, fall back to defaults
     - after 5s display timeline
     - after another 5s display content
*/
async function visitorTrack(){
  const code = document.getElementById('trackingNumber').value.trim();
  const trackDiv = document.getElementById('shipmentTracking');
  const contentDiv = document.getElementById('shipmentContent');
  trackDiv.style.display='block'; contentDiv.style.display='none';
  trackDiv.innerHTML = '<div class="header">Tracking...</div>';

  // begin API call
  let apiResult = null;
  if(code){
    try{
      const resp = await fetch(API_BASE + 'get_tracking.php?code=' + encodeURIComponent(code), {mode:'cors'});
      if(resp.ok){
        const j = await resp.json();
        if(j && j.success) apiResult = j.data;
      }
    }catch(e){
      // network / CORS error — we'll fall back to defaults
      apiResult = null;
    }
  }

  // Wait 5s then show timeline
  setTimeout(()=>{
    // Use API values when available, otherwise defaults
    const airport = apiResult && apiResult.airport_name ? apiResult.airport_name : 'Vnukovo International Airport, Russia';
    const address = apiResult && apiResult.receiver_address ? apiResult.receiver_address : '195299 St. Petersburg, Prosveshcheniya Avenue 104, Apt. 281';
    const time1 = apiResult && apiResult.event_time ? formatDate(apiResult.event_time) : '23 Sep 2025 — 07:30';
    const time2 = apiResult && apiResult.updated_at ? formatDate(apiResult.updated_at) : '22 Sep 2025 — 14:00';
    const status1 = (apiResult && apiResult.status === 'on_hold') ? 'ON HOLD' : 'ON HOLD';
    const status2 = (apiResult && apiResult.status === 'in_transit') ? 'IN TRANSIT' : 'IN TRANSIT';

    const timelineHtml = `
      <div class="header">Tracking Shipment</div>
      <div class="timeline">
        <div class="timeline-event completed">
          <div class="tick">✔</div>
          <div class="event-content">
            <div class="description">✅ Item has arrived at <strong>${escapeHtml(airport)}</strong>
              <div class="status-box">${escapeHtml(status1)}</div>
            </div>
            <div class="time-date">${escapeHtml(time1)}</div>
          </div>
        </div>

        <div class="timeline-event intransit">
          <div class="tick">⮕</div>
          <div class="event-content">
            <div class="description">☑️ Your item is on its way to <strong>Russia — London UK</strong>
              <div class="status-box">${escapeHtml(status2)}</div>
            </div>
            <div class="time-date" style="color:#1e90ff;font-weight:800">${escapeHtml(time2)}</div>
          </div>
        </div>
      </div>
    `;
    trackDiv.innerHTML = timelineHtml;

    // update map to receiver address if available
    const q = encodeURIComponent(address || airport);
    document.getElementById('mapFrame').src = 'https://www.google.com/maps?q=' + q + '&output=embed';

    // After second 5s delay show content
    setTimeout(()=>{

      if(apiResult){
        const origin = apiResult.origin_area || 'London UK';
        const dest = apiResult.destination_area || 'Russia';
        const rname = apiResult.receiver_name || 'Podvezennaya Elena Ivanovna';
        const rphone = apiResult.receiver_phone || '+79932195775';
        const raddr = apiResult.receiver_address || address;
        contentDiv.innerHTML = `
          <div class="header">Content of Shipment: Package</div>
          <div style="margin-top:8px"><strong>Origin Area:</strong> ${escapeHtml(origin)}<br><strong>Destination Area:</strong> ${escapeHtml(dest)}</div>
          <div style="margin-top:12px"><strong>Sender's Details</strong><div style="margin-top:6px">Name: James — Address: London UK</div></div>
          <div style="margin-top:12px"><strong>Receiver's Details</strong><div style="margin-top:6px">Name: ${escapeHtml(rname)} — Address: ${escapeHtml(raddr)} — Mobile: ${escapeHtml(rphone)}</div></div>
          <div style="margin-top:12px"><button onclick="downloadInvoiceImage()">Print Invoice</button></div>
        `;
      } else {
        // fallback content when API not available or not found
        contentDiv.innerHTML = `
          <div class="header">Content of Shipment: Package</div>
          <div style="margin-top:8px"><strong>Origin Area:</strong> London UK<br><strong>Destination Area:</strong> Russia</div>
          <div style="margin-top:12px"><strong>Sender's Details</strong><div style="margin-top:6px">Name: James — Address: London UK</div></div>
          <div style="margin-top:12px"><strong>Receiver's Details</strong><div style="margin-top:6px">Name: Podvezennaya Elena Ivanovna — Address: ${escapeHtml(address)} — Mobile: +79932195775</div></div>
          <div style="margin-top:12px"><button onclick="downloadInvoiceImage()">Print Invoice</button></div>
        `;
      }

      contentDiv.style.display = 'block';
      // retrigger animation so ticks animate when they appear
      document.querySelectorAll('.timeline-event').forEach((el)=>{ el.style.animation = 'none'; void el.offsetWidth; el.style.animation = ''; });

    }, 5000);

  }, 5000);
}

/* Print invoice: downloads only the specified image */
function downloadInvoiceImage(){
  const a = document.createElement('a');
  a.href = INVOICE_IMAGE_URL;
  a.download = 'invoice-image.jpeg';
  document.body.appendChild(a);
  a.click();
  a.remove();
}

/* format date (if API passes a datetime) */
function formatDate(d){
  // if d is in SQL datetime format: "2025-09-23 07:30:00"
  if(!d) return '';
  const dt = new Date(d);
  if(isNaN(dt)) return d;
  const opts = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
  return dt.toLocaleString(undefined, opts);
}

/* rotate reviews */
(function initReviews(){
  const reviews = document.querySelectorAll('.review'); let ri=0;
  function show(){ reviews.forEach(r=>r.classList.remove('show')); if(reviews[ri]) reviews[ri].classList.add('show'); ri=(ri+1)%reviews.length; }
  show(); setInterval(show,5000);
})();

</script>
</body>
</html>
